# ============================================================================
# AI Knowledge Assistant - Environment Configuration
# ============================================================================
# 
# INSTRUCTIONS:
# 1. Copy this file to .env:  cp .env.example .env
# 2. The app works in MOCK MODE without API keys (for testing)
# 3. Add your API keys when ready for real AI responses
#
# ============================================================================

# ----------------------------------------------------------------------------
# APP SETTINGS
# ----------------------------------------------------------------------------
APP_NAME="AI Knowledge Assistant"
APP_VERSION="1.0.0"

# Set to true for development (enables debug logging, hot reload)
DEBUG=true

# ----------------------------------------------------------------------------
# SECURITY (REQUIRED)
# ----------------------------------------------------------------------------
# Generate a secure key for production: openssl rand -hex 32
# For local testing, this default works fine
SECRET_KEY=local-testing-secret-key-change-in-production-abc123

# JWT token expiration in minutes (default: 7 days)
ACCESS_TOKEN_EXPIRE_MINUTES=10080

# ----------------------------------------------------------------------------
# DATABASE
# ----------------------------------------------------------------------------
# SQLite (default - good for local testing, no setup needed)
DATABASE_URL=sqlite+aiosqlite:///./knowledge_assistant.db

# PostgreSQL (for production - uncomment and configure)
# DATABASE_URL=postgresql+asyncpg://username:password@localhost:5432/knowledge_assistant

# ----------------------------------------------------------------------------
# LLM PROVIDER SETTINGS
# ----------------------------------------------------------------------------
# Choose your LLM provider: "anthropic" or "openai"
# If no API key is set, the app runs in MOCK MODE (returns simulated responses)
LLM_PROVIDER=anthropic

# --- Anthropic/Claude (Recommended) ---
# Get your key at: https://console.anthropic.com/
# Leave empty for mock mode
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-haiku-4-5-20251001

# --- OpenAI ---
# Get your key at: https://platform.openai.com/api-keys
# Leave empty for mock mode
OPENAI_API_KEY=
OPENAI_MODEL=gpt-3.5-turbo

# Embedding model (used for vector search - needs OpenAI key for real embeddings)
# Mock embeddings work without a key (hash-based, deterministic)
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# ----------------------------------------------------------------------------
# VECTOR STORE (ChromaDB)
# ----------------------------------------------------------------------------
# Local directory for storing vector embeddings
VECTOR_STORE_PATH=./vector_store

# Text chunking settings (how documents are split)
CHUNK_SIZE=1000
CHUNK_OVERLAP=200

# Disable ChromaDB telemetry
ANONYMIZED_TELEMETRY=False

# ----------------------------------------------------------------------------
# FILE UPLOAD SETTINGS
# ----------------------------------------------------------------------------
# Directory for uploaded documents
UPLOAD_DIR=./uploads

# Maximum file size in bytes (default: 10MB)
MAX_FILE_SIZE=10485760

# Allowed file extensions (comma-separated in code, but set as JSON array)
# ALLOWED_EXTENSIONS=[".txt", ".pdf"]

# ----------------------------------------------------------------------------
# CORS (Cross-Origin Resource Sharing)
# ----------------------------------------------------------------------------
# Allowed frontend origins (for API access)
# Add your deployment URLs here for production
CORS_ORIGINS=["http://localhost:3000", "http://127.0.0.1:3000"]

# ----------------------------------------------------------------------------
# FRONTEND SETTINGS (for Next.js)
# ----------------------------------------------------------------------------
# Backend API URL (internal Docker network)
API_URL=http://localhost:8000

# Public API URL (browser access)
NEXT_PUBLIC_API_URL=http://localhost:8000

# ============================================================================
# QUICK START TESTING (No API Keys Needed!)
# ============================================================================
#
# The app works in MOCK MODE without API keys:
#
# 1. Copy this file:
#    cp .env.example .env
#
# 2. Start the app:
#    make dev          # Local development
#    # OR
#    docker-compose up # Docker
#
# 3. Open http://localhost:3000
#
# 4. Register an account, upload documents, ask questions
#    - Embeddings use hash-based vectors (deterministic but not semantic)
#    - LLM returns mock responses explaining it's in test mode
#
# ============================================================================
# PRODUCTION CHECKLIST
# ============================================================================
#
# [ ] Generate strong SECRET_KEY: openssl rand -hex 32
# [ ] Set DEBUG=false
# [ ] Add real ANTHROPIC_API_KEY or OPENAI_API_KEY
# [ ] Configure PostgreSQL DATABASE_URL
# [ ] Update CORS_ORIGINS with production domains
# [ ] Set up HTTPS/TLS
#
# ============================================================================
